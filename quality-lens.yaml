# Quality Lens Configuration for Codex
# Mixed TypeScript + Rust monorepo

lenses:
  # TypeScript/JavaScript lenses
  eslint: pnpm exec eslint . --format json
  typescript: pnpm exec tsc --noEmit --listFiles
  prettier: pnpm exec prettier --check .
  jest: pnpm exec jest --json --coverage

  # Rust lenses (using manifest-path for codex-rs workspace)
  clippy: cargo clippy --manifest-path codex-rs/Cargo.toml --workspace --all-features --message-format json -- -D warnings
  rustfmt: cargo fmt --manifest-path codex-rs/Cargo.toml --all --check
  cargo-test: cargo nextest run --manifest-path codex-rs/Cargo.toml --workspace --message-format libtest-json

# Exclude CLI, build outputs, and docs
exclude:
  - "codex-cli/**"
  - "**/dist/**"
  - "**/bin/**"
  - "**/node_modules/**"
  - "**/target/**"
  - "docs/**"
